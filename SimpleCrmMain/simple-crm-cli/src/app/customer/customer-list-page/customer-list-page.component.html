<div class="table-content">
    <mat-card>
            <mat-card-title fxLayout>
                <span>Customers List</span>
            </mat-card-title>

                <div fxLayoutAlign = "start baseline">
                    <mat-form-field>
                        <mat-label>Search and Filter...<mat-icon *ngIf = "!filterInput.value" matSuffix>filter_list</mat-icon>
                        </mat-label>
                        <input matInput [formControl] = "filterInput">
                        <button matSuffix mat-icon-button *ngIf = "filterInput.value" aria-label = "Clear" (click) = "filterInput.setValue('')">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                    <span fxFlex></span>
                    <button fxFlex="nogrow" class="addButton" mat-mini-fab (click)="addCustomer()">
                        <mat-icon aria-label="Add Customer">add</mat-icon>
                    </button>   
                </div>

                <crm-customer-list-table [customers] = "allCustomers$ | async" 
                    (openCustomer)="openDetail($event)"></crm-customer-list-table>

        <!-- <table mat-table [dataSource] = "allCustomers$">

            <ng-container matColumnDef = "status-icon">
                <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
                <td mat-cell *matCellDef = "let row"> 
                    <mat-icon [svgIcon]="row.statusCode | statusIcon"></mat-icon>
                </td>
            </ng-container>

            <ng-container matColumnDef = "name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef = "let row"> {{row.firstName}} {{row.lastName}}</td>
            </ng-container>
            <ng-container matColumnDef = "phone">
                <th mat-header-cell *matHeaderCellDef> Phone </th>
                <td mat-cell *matCellDef = "let row"> {{row.phoneNumber}}</td>
            </ng-container>
            <ng-container matColumnDef = "status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef = "let row"> 
                    {{row.statusCode | uppercase}}
                </td>
            </ng-container>
            <ng-container matColumnDef = "email">
                <th mat-header-cell *matHeaderCellDef> Email </th>
                <td mat-cell *matCellDef = "let row"> {{row.emailAddress}}</td>
            </ng-container>
            <ng-container matColumnDef = "lastContactDate">
                <th mat-header-cell *matHeaderCellDef> Last Contact Date </th>
                <td mat-cell *matCellDef = "let row"> {{row.lastContactDate | date: 'MMM d, yyyy' | titlecase}}</td>
            </ng-container>


            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <th class="mat-mdc-cell" mat-cell *matCellDef="let row" (click)="openDetail(row)">
                    <div fxLayoutAlign="end">
                        <button mat-icon-button color="primary">
                            <mat-icon area-label="View customer detail">edit</mat-icon>
                        </button>
                    </div>
                </th>

            </ng-container>
                
                <tr mat-header-row *matHeaderRowDef = "displayColumns"></tr>
                <tr mat-row *matRowDef = "let row; columns: displayColumns;"></tr>
        </table> -->
    </mat-card>

    <div class="list-container">
        <mat-card class="card-list" 
            *ngFor="let cust of filteredCustomers$ | async ; index as i; trackBy: trackByCustomerId">
        <mat-card-title-group>
            <mat-card-title
            >{{ cust.firstName | titlecase }}
            {{ cust.lastName | titlecase }}</mat-card-title>
            
        </mat-card-title-group>
        </mat-card>
    </div>
</div>